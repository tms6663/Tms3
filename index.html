
<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ø­Ø§Ø³Ø¨Ø© Ù…Ù‚Ø§Ø³ Ø§Ù„Ø¨Ø®Ø§Ø®Ø§Øª</title>
  <style>
    body { font-family: Arial; direction: rtl; margin: 20px; }
    label { display: block; margin: 10px 0 5px; }
    input { width: 200px; padding: 5px; }
    button { margin-top: 10px; padding: 8px 16px; }
    table { border-collapse: collapse; margin-top: 20px; width: 100%; }
    th, td { border: 1px solid #ccc; padding: 5px; text-align: center; }
    th { background-color: #f0f0f0; }
    #waterRate { margin-top: 20px; font-weight: bold; color: green; }
  </style>
</head>
<body>
  <h2>ğŸ§® Ø£Ø¯Ø§Ø© Ø­Ø³Ø§Ø¨ Ù…Ù‚Ø§Ø³ Ø§Ù„Ø¨Ø®Ø§Ø®Ø§Øª ÙˆÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø§Ø¡/Ù…Â²</h2>

  <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¨Ø±Ø§Ø¬</label>
  <input type="number" id="numTowers" value="6">

  <label>Ø·ÙˆÙ„ Ø§Ù„Ø¨Ø±Ø¬ (Ù…ØªØ±)</label>
  <input type="number" id="towerLength" value="54">

  <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ø®Ø§Ø®Ø§Øª ÙÙŠ ÙƒÙ„ Ø¨Ø±Ø¬</label>
  <input type="number" id="sprinklersPerTower" value="36">

  <label>Ø§Ù„Ù…Ø³Ø§ÙØ© Ù…Ù† Ù…Ø±ÙƒØ² Ø§Ù„Ø±Ø´Ø§Ø´ Ø¥Ù„Ù‰ Ø£ÙˆÙ„ Ø¨Ø±Ø¬ (Ù…ØªØ±)</label>
  <input type="number" id="firstTowerDistance" value="20">

  <label>ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø§Ø¡ Ø§Ù„ÙƒÙ„ÙŠØ© (GPM)</label>
  <input type="number" id="totalGPM" value="1400">

  <label>Ø³Ø±Ø¹Ø© Ø§Ù„Ø±Ø´Ø§Ø´ (%)</label>
  <input type="number" id="pivotSpeed" value="100">

  <br>
  <button onclick="calculate()">Ø§Ø­Ø³Ø¨</button>

  <p id="waterRate"></p>

  <table id="resultTable">
    <thead>
      <tr>
        <th>Ø±Ù‚Ù… Ø§Ù„Ø¨Ø®Ø§Ø®</th>
        <th>Ø§Ù„Ù…Ø³Ø§ÙØ© Ù…Ù† Ø§Ù„Ù…Ø±ÙƒØ² (Ù…ØªØ±)</th>
        <th>Ø§Ù„ØªØµØ±Ù (GPM)</th>
        <th>Ù…Ù‚Ø§Ø³ Ø§Ù„Ù†ÙˆØ²Ù„ (10 PSI)</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    function getNozzleSize(gpm) {
      if (gpm <= 1.0) return "#5";
      else if (gpm <= 1.5) return "#6";
      else if (gpm <= 2.2) return "#8";
      else if (gpm <= 3.0) return "#10";
      else if (gpm <= 4.2) return "#12";
      else if (gpm <= 5.6) return "#14";
      else if (gpm <= 7.3) return "#16";
      else if (gpm <= 9.3) return "#18";
      else return "> #18";
    }

    function calculate() {
      const numTowers = parseInt(document.getElementById("numTowers").value);
      const towerLength = parseFloat(document.getElementById("towerLength").value);
      const sprinklersPerTower = parseInt(document.getElementById("sprinklersPerTower").value);
      const firstTowerDistance = parseFloat(document.getElementById("firstTowerDistance").value);
      const totalGPM = parseFloat(document.getElementById("totalGPM").value);
      const pivotSpeedPercent = parseFloat(document.getElementById("pivotSpeed").value);

      const totalSprinklers = numTowers * sprinklersPerTower;
      let positions = [];

      for (let i = 0; i < numTowers; i++) {
        const base = firstTowerDistance + i * towerLength;
        for (let j = 0; j < sprinklersPerTower; j++) {
          const offset = j * (towerLength / sprinklersPerTower);
          const distance = base + offset;
          positions.push(distance);
        }
      }

      const totalDistance = positions.reduce((a, b) => a + b, 0);
      const lastDistance = positions[positions.length - 1];

      const tbody = document.querySelector("#resultTable tbody");
      tbody.innerHTML = "";

      positions.forEach((distance, index) => {
        const ratio = distance / totalDistance;
        const gpm = +(ratio * totalGPM).toFixed(2);
        const nozzle = getNozzleSize(gpm);
        const row = `<tr>
          <td>${index + 1}</td>
          <td>${distance.toFixed(2)}</td>
          <td>${gpm}</td>
          <td>${nozzle}</td>
        </tr>`;
        tbody.innerHTML += row;
      });

      // Ø­Ø³Ø§Ø¨ ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø§Ø¡ Ø¨Ø§Ù„Ù…ØªØ± Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø±Ø¹Ø©
      const totalLitersPerMinute = totalGPM * 3.78541;
      const pivotSpeedMPerMin = 3 * (pivotSpeedPercent / 100);
      const area = lastDistance * pivotSpeedMPerMin;
      const litersPerSqMeter = (totalLitersPerMinute / area).toFixed(2);

      document.getElementById("waterRate").innerText =
        `ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠØ©: ${litersPerSqMeter} Ù„ØªØ±/Ù…Â² Ø¨Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© (Ø¨Ø³Ø±Ø¹Ø© ${pivotSpeedMPerMin.toFixed(2)} Ù…/Ø¯)`;
    }
  </script>
</body>
</html>
